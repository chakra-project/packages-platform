#!/bin/sh

set -e

filename="$1"

[ -e "$filename" ] || {
    echo "USAGE: $0 path/to/fglrxko_pci_ids.h" >&2
    exit 1
}

echo "# Listing generated by fglrx_supported_chakra-20100412."
echo "# Do not edit manually."
echo "# (C) 2010 Chakra-Developer-Team"

grep "0x" "$filename" | \
  sed -n 's/FGL_ASIC_ID(0x\([0-9A-F]\{4\}\)),$/0x\1/p' | \
  sort | uniq | sed -e 's/^[ \t]*//'

